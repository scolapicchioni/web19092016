{"version":3,"sources":["webpack:///webpack/bootstrap 6f2f0dfd7e5121b8eb8f","webpack:///./App.js","webpack:///./Trip.js","webpack:///./IndexedDBDataLayer.js","webpack:///./ViewModel.js","webpack:///./Chart.js"],"names":["vm","Trip","_description","v","_destination","_date","_rating","_id","id","destination","description","date","rating","dbVersion","dbName","objectStoreName","keyPathName","IndexedDBDataLayer","window","indexedDB","request","open","onerror","console","log","event","errorCode","onsuccess","onupgradeneeded","db","target","result","objectStoreNames","contains","deleteObjectStore","objectStore","createObjectStore","keyPath","transaction","oncomplete","_trips","push","putNext","i","length","put","close","Promise","resolve","reject","openCursor","cursor","value","continue","trip","localStorage","key","setItem","toString","JSON","stringify","parse","removeItem","ViewModel","dataLayer","_dataLayer","addEventListener","init","refreshUI","document","getElementById","addTrip","saveTrip","trips","chart","options","data","map","t","labels","canvasId","drawBarChart","getAllTrips","then","innerHTML","template","newTripElement","cloneNode","removeAttribute","querySelector","btnEdit","setAttribute","editTrip","srcElement","getAttribute","btnDelete","deleteTrip","appendChild","classList","remove","showForm","tripId","removeTrip","getTripById","preventDefault","add","Chart","canvas","ctx","getContext","canvasHeight","offsetHeight","canvasWidth","offsetWidth","borderSize","chartHeight","chartWidth","numberOfBars","barDistance","width","unity","reduce","p","c","clearRect","x","height","y","fillRect","fillText"],"mappings":"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","file":"trips.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6f2f0dfd7e5121b8eb8f\n **/","import {Trip} from \"./Trip\";\r\nimport {IndexedDBDataLayer} from \"./IndexedDBDataLayer\";\r\nimport {ViewModel} from \"./ViewModel\";\r\n\r\nconst vm = new ViewModel(new IndexedDBDataLayer());\n\n\n/** WEBPACK FOOTER **\n ** ./App.js\n **/","export class Trip{\r\n    \r\n    get description() {\r\n        return this._description;\r\n    }\r\n    set description(v) {\r\n        this._description = v;\r\n    }\r\n    \r\n    get destination(){\r\n        return this._destination;\r\n    }\r\n    set destination(v) {\r\n        this._destination = v;\r\n    }\r\n    \r\n    get date() {\r\n        return this._date;\r\n    }\r\n    set date(v) {\r\n        this._date = v;\r\n    }\r\n    \r\n    get rating(){\r\n        return this._rating;\r\n    }\r\n    set rating(v) {\r\n        this._rating = v;\r\n    }\r\n    \r\n    get id() {\r\n        return this._id;\r\n    }\r\n    set id(v) {\r\n        this._id = v;\r\n    }\r\n\r\n    constructor(id=0, destination=\"\", description=\"\", date=\"\", rating=0){\r\n        this.id = id || 0;\r\n        this.destination = destination || \"\";\r\n        this.description = description || \"\";\r\n        this.date = date || \"\";\r\n        this.rating = rating || 6;\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./Trip.js\n **/","import {Trip} from \"./Trip\";\r\n\r\nconst dbVersion = 3,\r\n      dbName = `TripsDB`,\r\n      objectStoreName = `Trips`,\r\n      keyPathName = `_id`;\r\n\r\nexport class IndexedDBDataLayer{\r\n   constructor(){\r\n       if(window.indexedDB){\r\n           const request = window.indexedDB.open(dbName, dbVersion);\r\n\r\n            request.onerror = event => {\r\n                // Do something with request.errorCode!\r\n                console.log(event.errorCode);\r\n            };\r\n            request.onsuccess = event => {\r\n                // Do something with request.result!\r\n                console.log(`opened`);\r\n            };\r\n            request.onupgradeneeded = event =>{\r\n                const db = event.target.result;\r\n                if(db.objectStoreNames.contains(objectStoreName)){\r\n                    db.deleteObjectStore(objectStoreName);\r\n                }\r\n                // Create an objectStore for this database\r\n                const objectStore = db.createObjectStore(objectStoreName, { keyPath: keyPathName });\r\n\r\n                objectStore.transaction.oncomplete = function(event) {\r\n                    // Store values in the newly created objectStore.\r\n                    const objectStore = db.transaction(objectStoreName, \"readwrite\").objectStore(objectStoreName);\r\n                    \r\n                    const _trips = [];\r\n                    _trips.push(new Trip(1, \"Roma\", \"Quanto sei bella Roma quando e' sera\", \"01/01/01\",9));\r\n                    _trips.push(new Trip(2, \"Paris\", \"Oh la la. Landjaeger ham beef short ribs jowl salami meatball. Jowl spare ribs pastrami fatback capicola. Pig shankle drumstick tri-tip short ribs. Spare ribs venison leberkas jerky. Fatback frankfurter tri-tip venison. Filet mignon cupim drumstick bresaola, doner tenderloin pork chop.\", \"01/01/01\",8));\r\n                    _trips.push(new Trip(3, \"Madrid\", \"Andale andale! Los tres caballeros.\", \"01/01/01\",5));\r\n                    _trips.push(new Trip(4, \"Budapest\", \"owl pork loin cow, doner shoulder ribeye capicola beef spare ribs frankfurter chicken porchetta brisket leberkas drumstick. Jerky alcatra cow ham hock. Tenderloin doner tail fatback. Shankle beef rump pork loin filet mignon.\", \"01/01/01\",9));\r\n\r\n                    putNext();\r\n                    \r\n                    let i = 0;\r\n                    function putNext() {\r\n                        if (i<_trips.length) {\r\n                            objectStore.put(_trips[i]).onsuccess = putNext;\r\n                            ++i;\r\n                        } else {   // complete\r\n                            console.log('populate complete');\r\n                            db.close();\r\n                        }\r\n                    }                                 \r\n                };\r\n            }\r\n       }       \r\n   }\r\n    \r\n    getAllTrips(){ \r\n        return new Promise((resolve,reject)=>{\r\n            \r\n            const _trips = [];\r\n            const request = window.indexedDB.open(dbName, dbVersion);\r\n            \r\n            request.onsuccess = event => {\r\n                const db = event.target.result;\r\n                const objectStore = db.transaction(objectStoreName).objectStore(objectStoreName);\r\n\r\n                objectStore.openCursor().onsuccess = event => {\r\n                    const cursor = event.target.result;\r\n                    if (cursor) {\r\n                        _trips.push(new Trip(cursor.value._id, cursor.value._destination,cursor.value._description,cursor.value._date,cursor.value._rating));\r\n                        cursor.continue();\r\n                    } else {\r\n                        db.close();\r\n                        resolve(_trips);\r\n                    }\r\n                };\r\n            }\r\n        });\r\n    }\r\n\r\n    addTrip(trip){\r\n        if(localStorage.length===0){\r\n            trip.id=1;\r\n        }else{\r\n            trip.id = +localStorage.key(localStorage.length-1) + 1;\r\n        }\r\n        localStorage.setItem(trip.id.toString(), JSON.stringify(trip));\r\n        return trip;\r\n    }\r\n    getTripById(id){\r\n        return JSON.parse(localStorage[id.toString()],(key,value)=>new Trip(value._id, value._destination,value._description,value._date,value._rating));\r\n    }\r\n    \r\n    editTrip(trip){\r\n        localStorage.setItem(trip.id.toString(), JSON.stringify(trip));\r\n        return trip; \r\n    }\r\n    removeTrip(id){\r\n        localStorage.removeItem(id.toString());\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./IndexedDBDataLayer.js\n **/","import {Trip} from \"./Trip\";\r\nimport {Chart} from \"./Chart\";\r\n\r\nexport class ViewModel{\r\n    \r\n    constructor(dataLayer){\r\n        this._dataLayer = dataLayer;\r\n\r\n        window.addEventListener(\"load\",()=>this.init());\r\n    }\r\n\r\n    init(){\r\n        this.refreshUI();\r\n\r\n        document.getElementById(\"add-trip\").addEventListener(\"click\", ()=>this.addTrip());\r\n        document.getElementById(\"save-trip\").addEventListener(\"click\", ()=>this.saveTrip());\r\n    }\r\n\r\n    drawBarChart(trips = []){\r\n        const chart = new Chart();\r\n        const options = {\r\n            data : trips.map(t=>t.rating),\r\n            labels : trips.map(t=>t.destination),\r\n            canvasId : \"chart\"\r\n        };\r\n        chart.drawBarChart(options);\r\n    }\r\n\r\n    refreshUI(){\r\n        this._dataLayer.getAllTrips().then(trips=>{\r\n            const target = document.getElementById(\"trips\");\r\n            target.innerHTML = \"\";\r\n            const template = document.getElementById(\"template\");\r\n            for(const trip of trips){\r\n                const newTripElement = template.cloneNode(true);\r\n                newTripElement.removeAttribute(\"id\");\r\n                newTripElement.querySelector(\".panel-title\").innerHTML = trip.destination;\r\n                newTripElement.querySelector(\".trip-description\").innerHTML = trip.description;\r\n                newTripElement.querySelector(\".trip-date\").innerHTML = trip.date;\r\n                newTripElement.querySelector(\".trip-rating\").innerHTML = trip.rating.toString();\r\n                const btnEdit = newTripElement.querySelector(\".edit-trip\");\r\n                btnEdit.setAttribute(\"data-trip-id\", trip.id.toString());\r\n                btnEdit.addEventListener(\"click\", (event)=>this.editTrip(+event.srcElement.getAttribute(\"data-trip-id\")));\r\n                const btnDelete = newTripElement.querySelector(\".delete-trip\");\r\n                btnDelete.setAttribute(\"data-trip-id\", trip.id.toString());\r\n                btnDelete.addEventListener(\"click\", (event)=>this.deleteTrip(+event.srcElement.getAttribute(\"data-trip-id\")));\r\n                target.appendChild(newTripElement);\r\n            }\r\n            this.drawBarChart(trips);\r\n        });\r\n    }\r\n\r\n    showForm(trip){\r\n        document.getElementById(\"add-trip-container\").classList.remove(\"invisible\");\r\n        document.getElementById(\"save-trip\").setAttribute(\"data-trip-id\", trip.id.toString());\r\n        document.getElementById(\"destination-input\").value = trip.destination;\r\n        document.getElementById(\"description-input\").value = trip.description;\r\n        document.getElementById(\"date-input\").value = trip.date;\r\n        document.getElementById(\"rating-input\").value = trip.rating.toString();\r\n    }\r\n    addTrip(){\r\n        const trip = new Trip();\r\n        this.showForm(trip);\r\n    }\r\n    deleteTrip(tripId){\r\n        this._dataLayer.removeTrip(tripId);\r\n        this.refreshUI();\r\n    }\r\n    editTrip(tripId){\r\n        const trip = this._dataLayer.getTripById(tripId);\r\n        this.showForm(trip);\r\n    }\r\n    saveTrip(){\r\n        event.preventDefault();\r\n        \r\n        const trip = new Trip();\r\n        trip.id = +document.getElementById(\"save-trip\").getAttribute(\"data-trip-id\");\r\n        trip.destination = document.getElementById(\"destination-input\").value;\r\n        trip.description = document.getElementById(\"description-input\").value;\r\n        trip.date = document.getElementById(\"date-input\").value;\r\n        trip.rating = +document.getElementById(\"rating-input\").value;\r\n\r\n        if(trip.id===0){\r\n            this._dataLayer.addTrip(trip);\r\n        }else{\r\n            this._dataLayer.editTrip(trip);\r\n        }\r\n\r\n        document.getElementById(\"add-trip-container\").classList.add(\"invisible\");\r\n\r\n        this.refreshUI();\r\n        return false;\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./ViewModel.js\n **/","export class Chart{\r\n    constructor(){}\r\n\r\n    drawBarChart({data=[], labels=[], canvasId=\"\"}={}){\r\n        const canvas = document.getElementById(canvasId);\r\n        if(canvas){\r\n            const ctx = canvas.getContext(\"2d\");\r\n\r\n            const canvasHeight = canvas.offsetHeight;\r\n            const canvasWidth = canvas.offsetWidth;\r\n\r\n            const borderSize = 10;\r\n\r\n            const chartHeight = canvasHeight - (2 * borderSize);\r\n            const chartWidth = canvasWidth - (2 * borderSize);\r\n\r\n            const numberOfBars = data.length;\r\n            const barDistance = 10; \r\n            const width = (canvasWidth / numberOfBars) - barDistance;\r\n            \r\n            const unity = chartHeight / data.reduce((p,c)=>p>c?p:c);\r\n            \r\n            ctx.clearRect(0,0,canvasWidth, canvasHeight);\r\n            for(let i = 0; i< data.length ; i++){\r\n                const x = i * (width + barDistance);\r\n                const height = data[i] * unity;\r\n                const y = chartHeight - borderSize - height;\r\n                ctx.fillRect(x,y,width, height);\r\n                ctx.fillText(labels[i],x,chartHeight);\r\n            }\r\n        }\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./Chart.js\n **/"],"sourceRoot":""}